{"ast":null,"code":"import _slicedToArray from\"C:/Users/RaulGuillen/Desktop/ONG/pop_rdj_js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Layout from'./Components/Hoc/Layout';import HomePage from'./Pages/HomePage';import Register from'./Pages/Register';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import Users from'./Pages/Users';import'./App.css';import Results from'./Pages/Results';import SingleResult from'./Pages/SingleResult';import LoginPage from'./Pages/LoginPage';import{auth,db}from'./utils/firebase';import AdminSettings from'./Pages/AdminSettings';import InternshipsPage from'./Pages/InternshipsPage';import InternshipsForm from'./Container/InternshipsForm';import SingleInternshipPage from'./Pages/SingleInternshipPage';import DashboardUser from'./Pages/DashboardUser';import CandidatesPage from'./Pages/CandidatesPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),firebaseUser=_React$useState2[0],setFirebaseUser=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),role=_React$useState4[0],setRole=_React$useState4[1];React.useEffect(function(){auth.onAuthStateChanged(function(user){if(user){setFirebaseUser(user);checkRol();}else{setFirebaseUser(null);}});},[]);var checkRol=function checkRol(){db.ref('auth').on('value',function(snapshot){var authUsers=snapshot.val();var currentUser=undefined;authUsers.forEach(function(user){if(user.email===auth.currentUser.email){currentUser=user;}});setRole(currentUser.rol);},function(error){return console.log(error);});};return firebaseUser!==false?/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",component:LoginPage}),role==='company'&&/*#__PURE__*/_jsx(Route,{path:\"/users\",component:Users}),/*#__PURE__*/_jsx(Route,{path:\"/results/:id\",component:SingleResult}),/*#__PURE__*/_jsx(Route,{path:\"/results\",component:Results}),role==='admin'&&/*#__PURE__*/_jsx(Route,{path:\"/settings\",component:AdminSettings}),role==='admin'&&/*#__PURE__*/_jsx(Route,{path:\"/internships/new\",component:InternshipsForm}),!role&&/*#__PURE__*/_jsx(Route,{path:\"/register\",component:Register}),(role==='admin'||role==='intern')&&/*#__PURE__*/_jsx(Route,{path:\"/internships/:id\",component:SingleInternshipPage}),(role==='admin'||role==='intern')&&/*#__PURE__*/_jsx(Route,{path:\"/internships\",component:InternshipsPage}),role==='intern'&&/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",component:DashboardUser}),role==='company'&&/*#__PURE__*/_jsx(Route,{path:\"/candidates\",component:CandidatesPage}),/*#__PURE__*/_jsx(Route,{path:\"/\",component:HomePage})]})})}):/*#__PURE__*/_jsx(\"div\",{children:\"Cargando...\"});};export default App;","map":{"version":3,"sources":["C:/Users/RaulGuillen/Desktop/ONG/pop_rdj_js/src/App.js"],"names":["React","Layout","HomePage","Register","BrowserRouter","Router","Switch","Route","Users","Results","SingleResult","LoginPage","auth","db","AdminSettings","InternshipsPage","InternshipsForm","SingleInternshipPage","DashboardUser","CandidatesPage","App","useState","firebaseUser","setFirebaseUser","role","setRole","useEffect","onAuthStateChanged","user","checkRol","ref","on","snapshot","authUsers","val","currentUser","undefined","forEach","email","rol","error","console","log"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Layout from './Components/Hoc/Layout';\r\nimport HomePage from './Pages/HomePage';\r\nimport Register from './Pages/Register';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Users from './Pages/Users';\r\nimport './App.css';\r\nimport Results from './Pages/Results';\r\nimport SingleResult from './Pages/SingleResult';\r\nimport LoginPage from './Pages/LoginPage';\r\nimport { auth, db } from './utils/firebase';\r\nimport AdminSettings from './Pages/AdminSettings';\r\nimport InternshipsPage from './Pages/InternshipsPage';\r\nimport InternshipsForm from './Container/InternshipsForm';\r\nimport SingleInternshipPage from './Pages/SingleInternshipPage';\r\nimport DashboardUser from './Pages/DashboardUser';\r\nimport CandidatesPage from './Pages/CandidatesPage';\r\n\r\nconst App = () => {\r\n  const [firebaseUser, setFirebaseUser] = React.useState(false);\r\n  const [role, setRole] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        setFirebaseUser(user);\r\n        checkRol();\r\n      } else {\r\n        setFirebaseUser(null);\r\n      }\r\n    });\r\n  }, []);\r\n  const checkRol = () => {\r\n    db.ref('auth').on('value', snapshot => {\r\n      const authUsers = snapshot.val();\r\n      let currentUser = undefined;\r\n      authUsers.forEach(user => {\r\n        if (user.email === auth.currentUser.email) {\r\n          currentUser = user;\r\n        }\r\n      });\r\n      setRole(currentUser.rol);\r\n    }, (error) => console.log(error));\r\n  };\r\n  return firebaseUser !== false ? (\r\n    <Router>\r\n      <Layout>\r\n        <Switch>\r\n          <Route path='/login' component={LoginPage} />\r\n          {role === 'company' && <Route path='/users' component={Users} />}\r\n          <Route path='/results/:id' component={SingleResult} />\r\n          <Route path='/results' component={Results} />\r\n          {role === 'admin' && <Route path='/settings' component={AdminSettings} />}\r\n          {role === 'admin' && <Route path='/internships/new' component={InternshipsForm} />}\r\n          {!role && <Route path='/register' component={Register} />}\r\n\r\n\r\n          {(role === 'admin' || role === 'intern') &&\r\n          <Route path='/internships/:id' component={SingleInternshipPage} />}\r\n          {(role === 'admin' || role === 'intern') && <Route path='/internships' component={InternshipsPage} />}\r\n\r\n          {role === 'intern' && <Route path='/dashboard' component={DashboardUser} />}\r\n          {role === 'company' && <Route path='/candidates' component={CandidatesPage} />}\r\n          <Route path='/' component={HomePage} />\r\n        </Switch>\r\n      </Layout>\r\n    </Router>\r\n  ) : (\r\n    <div>Cargando...</div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}