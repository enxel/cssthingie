{"ast":null,"code":"import _slicedToArray from\"C:/Users/RaulGuillen/Desktop/ONG/pop_rdj_js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button,Card,Container,Modal}from'react-bootstrap';import{auth,db}from'../utils/firebase';import{Link}from'react-router-dom';import gifTenor from'../Resources/tenor.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CandidatesPage=function CandidatesPage(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentUserData=_useState2[0],setCurrentUserData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),internshipList=_useState4[0],setIntershipList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),currentIntern=_useState6[0],setCurrentIntern=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(item){setCurrentIntern(item);setShow(true);};useEffect(function(){db.ref('auth').on('value',function(snapshot){var authUsers=snapshot.val();var currentUser=undefined;authUsers.forEach(function(user){if(user.email===auth.currentUser.email){currentUser=user;getListIntern(currentUser.idCompany);}});setCurrentUserData(currentUser);},function(error){return console.log(error);});},[]);var getListIntern=function getListIntern(id){db.ref('internships').on('value',function(data){var internships=data.val();var listOportinuties=[];for(var _i=0,_Object$keys=Object.keys(internships);_i<_Object$keys.length;_i++){var intern=_Object$keys[_i];if(internships[intern].institution.value===id){listOportinuties.push(internships[intern]);}}setIntershipList(listOportinuties);});};var saveCV=function saveCV(){};return/*#__PURE__*/_jsxs(Container,{children:[internshipList.length===0?/*#__PURE__*/_jsx(\"h2\",{children:\"No hay candidatos\"}):internshipList.map(function(item){return/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:item.modality}),/*#__PURE__*/_jsxs(Card.Body,{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Title,{children:item.name}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"h6\",{children:item.institution.label}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duracion de \",item.duration,\" meses.\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Numero de candidatos: \",item.candidates?item.candidates.length:0]})]}),item.candidates?/*#__PURE__*/_jsx(Button,{style:{height:'38px',alignSelf:'flex-end'},variant:\"primary\",onClick:function onClick(){return handleShow(item.candidates);},children:\"Ver mas\"}):'']})]});}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Lista de candidatos: \"})}),/*#__PURE__*/_jsx(Modal.Body,{children:currentIntern.map(function(item){return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:item.name}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:item.name}),/*#__PURE__*/_jsx(Card.Text,{children:item.email}),/*#__PURE__*/_jsx(\"a\",{href:item.resume,className:\"btn btn-primary float-right\",download:item.name,children:\"Descargar CV\"})]})]});})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleClose,style:{backgroundColor:'#FE3E00',borderBlockColor:'#FE3E00',boxShadow:'#FE3E00',borderBottomColor:'#FE3E00',borderColor:'#FE3E00'},children:\"Aceptar\"})})})]})]});};export default CandidatesPage;","map":{"version":3,"sources":["C:/Users/RaulGuillen/Desktop/ONG/pop_rdj_js/src/Pages/CandidatesPage.js"],"names":["React","useEffect","useState","Button","Card","Container","Modal","auth","db","Link","gifTenor","CandidatesPage","currentUserData","setCurrentUserData","internshipList","setIntershipList","currentIntern","setCurrentIntern","show","setShow","handleClose","handleShow","item","ref","on","snapshot","authUsers","val","currentUser","undefined","forEach","user","email","getListIntern","idCompany","error","console","log","id","data","internships","listOportinuties","Object","keys","intern","institution","value","push","saveCV","length","map","modality","name","label","duration","candidates","height","alignSelf","resume","backgroundColor","borderBlockColor","boxShadow","borderBottomColor","borderColor"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, Card, Container, Modal } from 'react-bootstrap';\r\nimport { auth, db } from '../utils/firebase';\r\nimport { Link } from 'react-router-dom';\r\nimport gifTenor from '../Resources/tenor.gif';\r\n\r\nconst CandidatesPage = () => {\r\n  const [currentUserData, setCurrentUserData] = useState({});\r\n  const [internshipList, setIntershipList] = useState([]);\r\n  const [currentIntern, setCurrentIntern] = useState([]);\r\n\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = (item) => {\r\n    setCurrentIntern(item);\r\n    setShow(true);\r\n  };\r\n  useEffect(() => {\r\n    db.ref('auth').on('value', snapshot => {\r\n      const authUsers = snapshot.val();\r\n      let currentUser = undefined;\r\n      authUsers.forEach(user => {\r\n        if (user.email === auth.currentUser.email) {\r\n          currentUser = user;\r\n          getListIntern(currentUser.idCompany);\r\n        }\r\n      });\r\n      setCurrentUserData(currentUser);\r\n    }, (error) => console.log(error));\r\n  }, []);\r\n  const getListIntern = (id) => {\r\n    db.ref('internships').on('value', data => {\r\n      const internships = data.val();\r\n      const listOportinuties = [];\r\n      for (let intern of Object.keys(internships)) {\r\n        if (internships[intern].institution.value === id) {\r\n          listOportinuties.push((internships[intern]));\r\n        }\r\n      }\r\n      setIntershipList(listOportinuties);\r\n    });\r\n  };\r\n  const saveCV = () => {\r\n\r\n  };\r\n  return (<Container>\r\n    {internshipList.length === 0 ? <h2>No hay candidatos</h2> : internshipList.map(item => (\r\n      <Card className='mb-4'>\r\n        <Card.Header>{item.modality}</Card.Header>\r\n        <Card.Body className='d-flex justify-content-between'>\r\n          <div>\r\n            <Card.Title>{item.name}</Card.Title>\r\n            <Card.Text>\r\n              <h6>{item.institution.label}</h6>\r\n              <p>Duracion de {item.duration} meses.</p>\r\n            </Card.Text>\r\n            <p>Numero de candidatos: {item.candidates ? item.candidates.length : 0}</p>\r\n          </div>\r\n          {\r\n            item.candidates ? <Button style={{\r\n              height: '38px',\r\n              alignSelf: 'flex-end'\r\n            }} variant='primary' onClick={() => handleShow(item.candidates)}>Ver mas</Button> : ''\r\n          }\r\n        </Card.Body>\r\n      </Card>\r\n    ))}\r\n    <Modal\r\n      show={show}\r\n      onHide={handleClose}\r\n      aria-labelledby='contained-modal-title-vcenter'\r\n      centered\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>Lista de candidatos: </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        {currentIntern.map(item => (\r\n          <Card>\r\n            <Card.Header>{item.name}</Card.Header>\r\n            <Card.Body>\r\n              <Card.Title>{item.name}</Card.Title>\r\n              <Card.Text>\r\n                {item.email}\r\n              </Card.Text>\r\n              <a href={item.resume} className='btn btn-primary float-right' download={item.name}>Descargar CV</a>\r\n            </Card.Body>\r\n          </Card>\r\n        ))}\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Link to='/'>\r\n          <Button\r\n            variant='primary'\r\n            onClick={handleClose}\r\n            style={{\r\n              backgroundColor: '#FE3E00',\r\n              borderBlockColor: '#FE3E00',\r\n              boxShadow: '#FE3E00',\r\n              borderBottomColor: '#FE3E00',\r\n              borderColor: '#FE3E00'\r\n            }}\r\n          >\r\n            Aceptar\r\n          </Button></Link>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  </Container>);\r\n};\r\nexport default CandidatesPage;\r\n"]},"metadata":{},"sourceType":"module"}