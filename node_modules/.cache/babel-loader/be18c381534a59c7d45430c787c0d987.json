{"ast":null,"code":"import _slicedToArray from\"C:/Users/RaulGuillen/Desktop/ONG/pop_rdj_js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button,Card,Container}from'react-bootstrap';import{Link}from'react-router-dom';import{auth,db}from'../utils/firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InternshipsPage=function InternshipsPage(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),internships=_useState2[0],setInternships=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),currentUserData=_useState4[0],setCurrentUserData=_useState4[1];useEffect(function(){db.ref('internships').on('value',function(data){var internships=data.val();var setOportinities=[];for(var _i=0,_Object$keys=Object.keys(internships);_i<_Object$keys.length;_i++){var intern=_Object$keys[_i];internships[intern].id=intern;setOportinities.push(internships[intern]);}checkRol();setOportinities.reverse();setInternships(setOportinities);//setInternships(setOptionsCompanies);\n});},[]);var checkRol=function checkRol(){db.ref('auth').on('value',function(snapshot){var authUsers=snapshot.val();var currentUser=undefined;authUsers.forEach(function(user){if(user.email===auth.currentUser.email){currentUser=user;}});setCurrentUserData(currentUser);},function(error){return console.log(error);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Crear pasantias\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:'35px'},children:currentUserData.rol==='admin'&&/*#__PURE__*/_jsx(Link,{to:\"internships/new\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn rdjf float-right\",children:\"Agregar\"})})}),/*#__PURE__*/_jsx(\"hr\",{}),internships.map(function(intern){return/*#__PURE__*/_jsxs(Card,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Card.Header,{children:intern.modality}),/*#__PURE__*/_jsxs(Card.Body,{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Card.Title,{children:intern.name}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"h6\",{children:intern.institution.label}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duracion de \",intern.duration,\" meses.\"]})]})]}),/*#__PURE__*/_jsx(Link,{to:\"internships/\".concat(intern.id),children:/*#__PURE__*/_jsx(Button,{style:{height:'38px',alignSelf:'flex-end'},variant:\"primary\",children:\"Ver mas\"})})]})]});})]})});};export default InternshipsPage;","map":{"version":3,"sources":["C:/Users/RaulGuillen/Desktop/ONG/pop_rdj_js/src/Pages/InternshipsPage.js"],"names":["React","useEffect","useState","Button","Card","Container","Link","auth","db","InternshipsPage","props","internships","setInternships","currentUserData","setCurrentUserData","ref","on","data","val","setOportinities","Object","keys","intern","id","push","checkRol","reverse","snapshot","authUsers","currentUser","undefined","forEach","user","email","error","console","log","height","rol","map","modality","name","institution","label","duration","alignSelf"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, Card, Container } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { auth, db } from '../utils/firebase';\r\n\r\n\r\nconst InternshipsPage = (props) => {\r\n  const [internships, setInternships] = useState([]);\r\n  const [currentUserData, setCurrentUserData] = useState({});\r\n\r\n  useEffect(() => {\r\n    db.ref('internships').on('value', data => {\r\n      const internships = data.val();\r\n      const setOportinities = [];\r\n      for (let intern of Object.keys(internships)) {\r\n        internships[intern].id = intern;\r\n        setOportinities.push(internships[intern]);\r\n      }\r\n      checkRol();\r\n      setOportinities.reverse();\r\n      setInternships(setOportinities);\r\n      //setInternships(setOptionsCompanies);\r\n    });\r\n  }, []);\r\n  const checkRol = () => {\r\n    db.ref('auth').on('value', snapshot => {\r\n      const authUsers = snapshot.val();\r\n      let currentUser = undefined;\r\n      authUsers.forEach(user => {\r\n        if (user.email === auth.currentUser.email) {\r\n          currentUser = user;\r\n        }\r\n      });\r\n      setCurrentUserData(currentUser);\r\n    }, (error) => console.log(error));\r\n  };\r\n  return (\r\n    <>\r\n      <Container>\r\n        <h2 className='text-center'>Crear pasantias</h2>\r\n        <div style={{ height: '35px' }}>\r\n          {currentUserData.rol === 'admin' && <Link to='internships/new'>\r\n            <button className='btn rdjf float-right'>Agregar</button>\r\n          </Link>}\r\n        </div>\r\n        <hr />\r\n        {internships.map(intern => (\r\n          <Card className='mb-4'>\r\n            <Card.Header>{intern.modality}</Card.Header>\r\n            <Card.Body className='d-flex justify-content-between'>\r\n              <div>\r\n                <Card.Title>{intern.name}</Card.Title>\r\n                <Card.Text>\r\n                  <h6>{intern.institution.label}</h6>\r\n                  <p>Duracion de {intern.duration} meses.</p>\r\n                </Card.Text>\r\n              </div>\r\n              <Link to={`internships/${intern.id}`}>\r\n                <Button style={{\r\n                  height: '38px',\r\n                  alignSelf: 'flex-end'\r\n                }} variant='primary'>Ver mas</Button>\r\n              </Link>\r\n\r\n            </Card.Body>\r\n          </Card>\r\n        ))}\r\n\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default (InternshipsPage);\r\n\r\n"]},"metadata":{},"sourceType":"module"}